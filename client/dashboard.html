<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 2rem;
        }

        /* Navigation Bar */
        nav {
            background-color: #f5f5f5;
            border-bottom: 1px solid #ddd;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        nav a {
            text-decoration: none;
            margin: 0 1rem;
            color: #333;
            font-weight: bold;
        }

        nav a:hover {
            color: #e67e22;
        }

        /* Page Content */
        .container {
            padding: 2rem;
        }

        h2 {
            margin-bottom: 1rem;
        }

        #logoutBtn {
            margin-top: 1rem;
            background: #e74c3c;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            cursor: pointer;
        }

        #logoutBtn:hover {
            background-color: #cf6112;
        }

        /* Footer */
        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 1rem;
            position: fixed;
            bottom: 0;
            width:100%
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
     <nav>
        <div>
            <a href="/dashboard">Dashboard</a>
            <a href="/places">Places</a>
            <a href="/itineraries">Itineraries</a>
            <a href="/reviews">Reviews</a>
        </div>
        <button id="logoutBtn">Log Out</button>
     </nav>

     <!-- Main Content -->
      <div class="container">
        <h2>Welcome to Your Dashboard</h2>
        <p id="userInfo">Loading user info...</p>
        <button id="logoutBtn">Log Out</button>
      </div>

      <!-- Footer -->
       <footer>
        &copy; 2025 Travel App. All rights reserved.
       </footer>

    <script>
        async function loadUser() {
            try {
                const res = await fetch('/api/auth/user');
                const data = await res.json();

                if (res.ok) {
                    document.getElementById('userInfo').textContent = `Hello, ${data.username} (${data.email})`;
                } else {
                    window.location.href = '/login'; // Not logged in
                }
            } catch (err) {
                console.error(err);
                window.location.href = '/login'
            }
        }

        document.getElementById('logoutBtn').addEventListener('click', async () => {
            await fetch('/api/auth/logout');
            window.location.href = '/login';
        });

        loadUser();
    </script>
</body>
</html>